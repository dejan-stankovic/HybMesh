<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Matlab Bindings for HybMesh &#8212; HybMesh 0.5.1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="C# Bindings for HybMesh" href="ooics.html" />
    <link rel="prev" title="Java Bindings for HybMesh" href="ooijava.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ooics.html" title="C# Bindings for HybMesh"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ooijava.html" title="Java Bindings for HybMesh"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HybMesh 0.5.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="oointerface.html" accesskey="U">High-Level Programming Interfaces</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="matlab-bindings-for-hybmesh">
<h1>Matlab Bindings for HybMesh<a class="headerlink" href="#matlab-bindings-for-hybmesh" title="Permalink to this headline">¶</a></h1>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Matlab (Octave) bindings contain set of source *.m files
(one for each class) and a pair of shared libraries <code class="docutils literal"><span class="pre">core_hmconnection_oct.oct</span></code>,
<code class="docutils literal"><span class="pre">core_hmconnection_matlab</span></code> for Octave and Matlab communication respectively.
The most convenient way to deal with all that mess is to use <code class="docutils literal"><span class="pre">addpath</span></code> directive
to include the whole bindings directory. After that the <strong>Hybmesh</strong> class
will be available. To set directory containing hybmesh executable (if it differs
from the default) use static <strong>Hybmesh.hybmesh_exec_path()</strong> method.</p>
<p>Like Python interface, matlab wrapper doesn&#8217;t provide
special point classes. Instead a raw vector with 2 or 3 entries
should be used to pass a point to a function.
When point list of size <code class="docutils literal"><span class="pre">n</span></code> is needed use <code class="docutils literal"><span class="pre">nx2</span></code> or <code class="docutils literal"><span class="pre">nx3</span></code> matrix.
When list of geometrical objects is needed use cell arrays.
In the following example two contours are created by passing
a list of points and then
they are connected by a method taking cell array of contour objects
as argument:</p>
<div class="highlight-matlab"><div class="highlight"><pre><span></span><span class="n">hm</span> <span class="p">=</span> <span class="n">Hybmesh</span><span class="p">();</span>
<span class="n">c25</span> <span class="p">=</span> <span class="n">hm</span><span class="p">.</span><span class="n">create_contour</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">;</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]);</span>
<span class="n">c26</span> <span class="p">=</span> <span class="n">hm</span><span class="p">.</span><span class="n">create_contour</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">;</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">;</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]);</span>
<span class="n">c27</span> <span class="p">=</span> <span class="n">hm</span><span class="p">.</span><span class="n">connect_subcontours</span><span class="p">({</span><span class="n">c25</span><span class="p">,</span> <span class="n">c26</span><span class="p">},</span> <span class="p">[]);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">nan</span></code> value is used instead of Python <code class="docutils literal"><span class="pre">None</span></code> where not-defined
object should be passed.</p>
<p>As it was mentioned above there are no special
exception classes in Matlab bindings (since they are not supported by Octave).
Instead simple <strong>error()</strong> calls are used which could also be
handled in <code class="docutils literal"><span class="pre">try...catch...end</span></code> blocks.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Native Matlab indexing starts from one. However
Hybmesh operates with zero based indices. So
all hybmesh wrapper functions which require
indices as arguments or return
set of indices of any kind use C-style indexing.</p>
</div>
<p>Some wrapper functions ending arguments could be omitted
in order to use their default values. Such arguments along with
their default values are specified in function documentation.
For example this is <em>Hybmesh</em> method for building rectangular
grid as it is defined in <code class="docutils literal"><span class="pre">Hybmesh.m</span></code> wrapper file</p>
<div class="highlight-matlab"><div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span>ret<span class="p">=</span><span class="nf">add_unf_rect_grid</span><span class="p">(</span>self, p0, p1, nx, ny, bnd<span class="p">)</span><span class="w"></span>
<span class="c">% ADD_UNF_RECT_GRID</span>
<span class="c">% Builds rectangular grid.</span>
<span class="c">%   p0: 2d point as [x, y];</span>
<span class="c">%   p1: 2d point as [x, y];</span>
<span class="c">%   nx: int;</span>
<span class="c">%   ny: int;</span>
<span class="c">%   bnd: row vector of int. DEFAULT is [0, 0, 0, 0];</span>
<span class="c">%   ----</span>
<span class="c">%   returns: GRID2D;</span>
<span class="c">%</span>
<span class="c">% See details in hybmeshpack.hmscript.add_unf_rect_grid().</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nargin</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">bnd</span> <span class="p">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">];</span>
    <span class="k">end</span>
    <span class="c">....</span>
</pre></div>
</div>
<p>Here the first argument is used to address <em>Hybmesh</em> instance.
The function by itself takes 5 parameters, but also could be
called with only 4. In the latter case default <em>bnd = [0, 0, 0, 0]</em>
will be used.</p>
<p><em>Hybmesh</em> is a handle class which has a destructor <em>delete</em> method.
Until this method is called hybmesh background executable will not stop working.
Matlab calls it implicitly when an instance of <em>Hybmesh</em> gets out of context.
However if this instance presents in the global scope, it is recommended to
destroy it manually either by invocation of <em>delete</em> method or using <code class="docutils literal"><span class="pre">clear</span></code>
directive.</p>
<p>For detailed description of all methods consult
the <a class="reference internal" href="oointerface.html#ooifuncref"><span class="std std-ref">Python binding functions reference</span></a>
and embedded documentation of wrapper <code class="docutils literal"><span class="pre">*.m</span></code> files.</p>
</div>
<div class="section" id="helloworld-example">
<h2>Helloworld Example<a class="headerlink" href="#helloworld-example" title="Permalink to this headline">¶</a></h2>
<p>After successful hybmesh installation create the following file
replacing path at the first line if needed and run
it as a usual Matlab/Octave script</p>
<div class="literal-block-wrapper container" id="id1">
<div class="code-block-caption"><span class="caption-text">hmtest.m</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-matlab"><div class="highlight"><pre><span></span><span class="n">addpath</span><span class="p">(</span><span class="s">&#39;C:/Program Files/Hybmesh/include/m&#39;</span><span class="p">);</span>

<span class="n">hm</span> <span class="p">=</span> <span class="n">Hybmesh</span><span class="p">();</span>
<span class="n">g</span> <span class="p">=</span> <span class="n">hm</span><span class="p">.</span><span class="n">add_unf_rect_grid</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">d</span> <span class="p">=</span> <span class="n">g</span><span class="p">.</span><span class="n">dims</span><span class="p">();</span>
<span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;number of cells: %i\n&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="n">clear</span> <span class="n">hm</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="introductory-example">
<h2>Introductory Example<a class="headerlink" href="#introductory-example" title="Permalink to this headline">¶</a></h2>
<p>In this example a simple unstructured triangle grid
in custom polygon is built and displayed.
Grid step sizes are defined by reference point boundary partition
and two embedded point conditions.
The unstructured triangulation is performed by
internal call of corresponding GMSH method.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/octaveexample.png"><img alt="_images/octaveexample.png" src="_images/octaveexample.png" style="width: 300px;" /></a>
</div>
<div class="highlight-matlab"><div class="highlight"><pre><span></span><span class="c">% add directory where Hybmesh.m is located</span>
<span class="n">addpath</span><span class="p">(</span><span class="s">&#39;../../../../build/bindings/m&#39;</span><span class="p">);</span>
<span class="c">% initialize hybmesh object</span>
<span class="n">hm</span> <span class="p">=</span> <span class="n">Hybmesh</span><span class="p">();</span>

<span class="c">% set verbose stdout output</span>
<span class="n">hm</span><span class="p">.</span><span class="n">stdout_verbosity</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

<span class="c">% define set of points bounding triangulated area</span>
<span class="c">% first equals last for closed contours.</span>
<span class="n">points</span> <span class="p">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">;</span>
    <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">;</span>
    <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">;</span>
    <span class="mf">1.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">;</span>
    <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">;</span>
    <span class="mf">0.3</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">;</span>
    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">;</span>
    <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">];</span>

<span class="c">% create a bounding contour</span>
<span class="n">cont</span> <span class="p">=</span> <span class="n">hm</span><span class="p">.</span><span class="n">create_contour</span><span class="p">(</span><span class="n">points</span><span class="p">);</span>

<span class="c">% perform contour parition using reference points:</span>
<span class="c">% - at point closest to [0, 0] recommended size is 0.05,</span>
<span class="c">% - at point closest to [1, 1] recommended size is 0.2.</span>
<span class="n">domain</span> <span class="p">=</span> <span class="n">hm</span><span class="p">.</span><span class="n">partition_contour_ref_points</span><span class="p">(</span><span class="n">cont</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]);</span>

<span class="c">% add two inner points which should present in result</span>
<span class="n">inner_points</span> <span class="p">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">;</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">];</span>

<span class="c">% triangulate domain with two additional inner points</span>
<span class="c">% with recommended step sizes 0.01, 0.03 respectively.</span>
<span class="n">grid</span> <span class="p">=</span> <span class="n">hm</span><span class="p">.</span><span class="n">triangulate_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">],</span> <span class="n">inner_points</span><span class="p">);</span>

<span class="c">% get grid vertices as plain [x0, y0, x1, y1, ....] array</span>
<span class="n">pts</span> <span class="p">=</span> <span class="n">grid</span><span class="p">.</span><span class="n">raw_vertices</span><span class="p">();</span>

<span class="c">% get cell-vertices table as plain array of vertex indicies where</span>
<span class="c">% each three represent a triangle. Indexing starts with zero.</span>
<span class="n">tris</span> <span class="p">=</span> <span class="n">grid</span><span class="p">.</span><span class="n">raw_tab</span><span class="p">(</span><span class="s">&#39;cell_vert&#39;</span><span class="p">);</span>

<span class="c">% modify grid data to be able to plot it using triplot function:</span>
<span class="c">% 1. slice pts array into separate x and y arrays</span>
<span class="n">x</span><span class="p">=</span><span class="n">pts</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="k">end</span><span class="p">);</span>
<span class="n">y</span><span class="p">=</span><span class="n">pts</span><span class="p">(</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="k">end</span><span class="p">);</span>
<span class="c">% 2. reshape tris into 2D matrix and add unity to fit native indexing</span>
<span class="n">tris</span> <span class="p">=</span> <span class="nb">reshape</span><span class="p">(</span><span class="n">tris</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[])</span><span class="o">&#39;</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

<span class="c">% explicitly free hybmesh handle</span>
<span class="n">clear</span> <span class="n">hm</span><span class="p">;</span>

<span class="c">% plot data</span>
<span class="n">triplot</span><span class="p">(</span><span class="n">tris</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Matlab Bindings for HybMesh</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#helloworld-example">Helloworld Example</a></li>
<li><a class="reference internal" href="#introductory-example">Introductory Example</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ooijava.html"
                        title="previous chapter">Java Bindings for HybMesh</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ooics.html"
                        title="next chapter">C# Bindings for HybMesh</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ooimatlab.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ooics.html" title="C# Bindings for HybMesh"
             >next</a> |</li>
        <li class="right" >
          <a href="ooijava.html" title="Java Bindings for HybMesh"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HybMesh 0.5.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="oointerface.html" >High-Level Programming Interfaces</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, KalininEI.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.3.
    </div>
  </body>
</html>