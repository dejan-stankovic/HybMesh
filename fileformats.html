<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Native File Formats &#8212; HybMesh 0.5.1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Versions History" href="vers.html" />
    <link rel="prev" title="C# Bindings for HybMesh" href="ooics.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="vers.html" title="Versions History"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ooics.html" title="C# Bindings for HybMesh"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HybMesh 0.5.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="native-file-formats">
<span id="nativeformat"></span><h1>Native File Formats<a class="headerlink" href="#native-file-formats" title="Permalink to this headline">¶</a></h1>
<p>Native hybmesh files are separated into two sections. The first section
is a xml document with a root element called <strong>&lt;HybMeshData&gt;</strong> with
possible attributes. The second section is a binary data.
It stores numeric array values only. If file has no binary data then
binary section is empty and the whole file is a valid xml document
which could be read by any xml parser.
Binary section starts directly after root xml element closing tag <strong>&lt;/HybMeshData&gt;</strong>
without any intermediate whitespaces like <code class="docutils literal"><span class="pre">\n</span></code>, <code class="docutils literal"><span class="pre">\r</span></code> etc.</p>
<p>Indexing of all primitives in hybmesh data format starts from 0.
Index equals -1 (for example in face-cell connectivity) shows
absence of primitive (no cell connected to one of face sides, i.e. a boundary face).</p>
<p>File extension convention is:</p>
<ul class="simple">
<li>*.hmg files contain only set of <a class="reference internal" href="#grid2d-file"><span class="std std-ref">2D</span></a> or <a class="reference internal" href="#grid3d-file"><span class="std std-ref">3D</span></a> grids,</li>
<li>*.hmc files contain set of <a class="reference internal" href="#contour2d-file"><span class="std std-ref">contours</span></a> and <a class="reference internal" href="#surface3d-file"><span class="std std-ref">surfaces</span></a>,</li>
<li>*.hmd files contain set of all possible geometric data,</li>
<li>*.hmp files contain <a class="reference internal" href="#hmp-file"><span class="std std-ref">hybmesh project files</span></a>;</li>
</ul>
<div class="section" id="numeric-arrays-storage">
<span id="numeric-storage"></span><h2>Numeric arrays storage<a class="headerlink" href="#numeric-arrays-storage" title="Permalink to this headline">¶</a></h2>
<p>All geometric data is stored in numeric array xml elements</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;NAME</span> <span class="na">type=</span><span class="s">&quot;char/int/float/double&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii/binary&quot;</span> <span class="na">dim=</span><span class="s">&quot;1/2/3/.../variable&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">NAME</span></code> is a numeric array name which depends on what data it represents.</li>
<li><code class="docutils literal"><span class="pre">type</span></code> attribute represents data type stored in array. Currently hybmesh generator supports
four possible types: <code class="docutils literal"><span class="pre">char</span></code>, <code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">float</span></code> and <code class="docutils literal"><span class="pre">double</span></code>.</li>
<li><code class="docutils literal"><span class="pre">format</span></code> attribute could equal <code class="docutils literal"><span class="pre">ascii</span></code> or <code class="docutils literal"><span class="pre">binary</span></code>. It shows if data is stored in
xml node as an ascii string or in a binary section.</li>
<li><code class="docutils literal"><span class="pre">dim</span></code> attribute shows vector dimension of data. It could equal <code class="docutils literal"><span class="pre">&quot;1&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;2&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;3&quot;</span></code>, ...
for one-, two-, three- (or any other positive integer) dimension vector. A special value <code class="docutils literal"><span class="pre">variable</span></code>
provides vectors which dimensions vary from one entry to another. In the latter case each entry dimension
is written as an unsigned integer before entry values.</li>
</ul>
<p>Array element doesn&#8217;t contain any information regarding total size of the array because it should be understood from
the context. <code class="docutils literal"><span class="pre">type</span></code> and <code class="docutils literal"><span class="pre">format</span></code> attributes are mandatory for each numeric array; <code class="docutils literal"><span class="pre">dim</span></code> value
in most cases is known from the context and this attribute could be omitted.</p>
<p>There are no restrictions on data type and format depending on the context.
Any data could be stored in any supported format. For example you could store points coordinates
with <code class="docutils literal"><span class="pre">'char'</span></code> or face-cell connectivity table using <code class="docutils literal"><span class="pre">'float'</span></code> type. It&#8217;d still be a
valid hybmesh format numeric array
(of course it would be automatically converted into doubles and integers respectively while loading into hybmesh).</p>
<p>Elements with <code class="docutils literal"><span class="pre">format=&quot;ascii&quot;</span></code> storage contain its data string in a text field.
Numeric values in this string are separated using any amount of any whitespaces.
<code class="docutils literal"><span class="pre">char</span></code> values are represented as integers in <code class="docutils literal"><span class="pre">[-127,</span> <span class="pre">127]</span></code> interval.</p>
<p>For binary data <code class="docutils literal"><span class="pre">format=&quot;binary&quot;</span></code> numeric array elements contain a subnode called <code class="docutils literal"><span class="pre">START</span></code> which stores
a byte position in a binary section where data of this record starts.
<code class="docutils literal"><span class="pre">char</span></code> arrays use 1 byte per value; <code class="docutils literal"><span class="pre">integer</span></code> and <code class="docutils literal"><span class="pre">float</span></code> arrays &#8211; 4 bytes per value;
<code class="docutils literal"><span class="pre">double</span></code> arrays &#8211; 8 bytes per value.
For <code class="docutils literal"><span class="pre">dim=&quot;variable&quot;</span></code> cases each number representing dimension of an entry is written using 4 bytes as an
unsigned integer.</p>
<p>All binary data is stored using little-endian format.</p>
<div class="figure" id="id2">
<a class="reference internal image-reference" href="_images/g1_for_hmxml.png"><img alt="_images/g1_for_hmxml.png" src="_images/g1_for_hmxml.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">fig. 1</span></p>
</div>
<p>Lets say we want to write a numeric array representing cell-edge connectivity of a grid depicted in fig. 1.
This array is not needed by <a class="reference internal" href="#grid2d-file"><span class="std std-ref">2d grid storage format</span></a>. However it could
be saved as a <a class="reference internal" href="#udef-fields"><span class="std std-ref">user defined field</span></a> in a node representing cell structure.
As we can see from the picture this would be an integer vector of two entries (one for each cell);
each entry has a dimension of 4 as
both cells are formed by four edges.
So in ascii format it would be written as</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;HybMeshData&gt;</span>
  .....
  <span class="nt">&lt;GRID2D&gt;</span>
    <span class="nt">&lt;CELLS&gt;</span>
      <span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;__cell_edges__&quot;</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span> <span class="na">dim=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
        0 1 2 3
        4 5 6 2
      <span class="nt">&lt;/FIELD&gt;</span>
      .....
    <span class="nt">&lt;/CELLS&gt;</span>
    .....
  <span class="nt">&lt;/GRID2D&gt;</span>
<span class="nt">&lt;/HybMeshData&gt;</span>
</pre></div>
</div>
<p>We can also write this vector using variable vector format form:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;HybMeshData&gt;</span>
  .....
  <span class="nt">&lt;GRID2D&gt;</span>
    <span class="nt">&lt;CELLS&gt;</span>
      <span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;__cell_edges__&quot;</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span> <span class="na">dim=</span><span class="s">&quot;variable&quot;</span><span class="nt">&gt;</span>
        4   0 1 2 3
        4   4 5 6 2
      <span class="nt">&lt;/FIELD&gt;</span>
      .....
    <span class="nt">&lt;/CELLS&gt;</span>
    .....
  <span class="nt">&lt;/GRID2D&gt;</span>
<span class="nt">&lt;/HybMeshData&gt;</span>
</pre></div>
</div>
<p>In binary format xml part of this record will look like</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;HybMeshData&gt;</span>
  .....
  <span class="nt">&lt;GRID2D&gt;</span>
    <span class="nt">&lt;CELLS&gt;</span>
      <span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;__cell_edges__&quot;</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span> <span class="na">dim=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;START&gt;</span>1111<span class="nt">&lt;/START&gt;</span>
      <span class="nt">&lt;/FIELD&gt;</span>
      .....
    <span class="nt">&lt;/CELLS&gt;</span>
    .....
  <span class="nt">&lt;/GRID2D&gt;</span>
<span class="nt">&lt;/HybMeshData&gt;</span>
</pre></div>
</div>
<p>taking into account that first 1111 bytes of binary buffer are used by some other data.
Total amount of bytes which are used by this array is</p>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">length</span> <span class="pre">of</span> <span class="pre">array(=2)</span> <span class="pre">*</span> <span class="pre">dimension(=4)</span> <span class="pre">*</span> <span class="pre">size</span> <span class="pre">of</span> <span class="pre">integer</span> <span class="pre">(=4)</span> <span class="pre">=</span> <span class="pre">32</span></code></div>
</div>
<p>and binary buffer by itself will be</p>
<div class="figure" id="id3">
<a class="reference internal image-reference" href="_images/byte_scheme1.png"><img alt="_images/byte_scheme1.png" src="_images/byte_scheme1.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">fig. 2</span></p>
</div>
<p>Using <code class="docutils literal"><span class="pre">format=&quot;binary&quot;</span> <span class="pre">dim=&quot;variable&quot;</span></code> the same data will be represented as</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;HybMeshData&gt;</span>
  .....
  <span class="nt">&lt;GRID2D&gt;</span>
    <span class="nt">&lt;CELLS&gt;</span>
      <span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;__cell_edges__&quot;</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span> <span class="na">dim=</span><span class="s">&quot;variable&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;START&gt;</span>1111<span class="nt">&lt;/START&gt;</span>
      <span class="nt">&lt;/FIELD&gt;</span>
      .....
    <span class="nt">&lt;/CELLS&gt;</span>
    .....
  <span class="nt">&lt;/GRID2D&gt;</span>
<span class="nt">&lt;/HybMeshData&gt;</span>
</pre></div>
</div>
<p>Buffer length will be equal to</p>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">size</span> <span class="pre">of</span> <span class="pre">unsigned</span> <span class="pre">interger(=4)</span> <span class="pre">+</span> <span class="pre">dimension</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">first</span> <span class="pre">entry(=4)</span> <span class="pre">*</span> <span class="pre">size</span> <span class="pre">of</span> <span class="pre">integer(=4)</span> <span class="pre">+</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">size</span> <span class="pre">of</span> <span class="pre">unsigned</span> <span class="pre">interger(=4)</span> <span class="pre">+</span> <span class="pre">dimension</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">entry(=4)</span> <span class="pre">*</span> <span class="pre">size</span> <span class="pre">of</span> <span class="pre">integer(=4)</span> <span class="pre">=</span> <span class="pre">40</span> <span class="pre">bytes</span></code></div>
</div>
<p>and look like</p>
<div class="figure" id="id4">
<a class="reference internal image-reference" href="_images/byte_scheme2.png"><img alt="_images/byte_scheme2.png" src="_images/byte_scheme2.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">fig. 3</span></p>
</div>
</div>
<div class="section" id="user-defined-fields">
<span id="udef-fields"></span><h2>User defined fields<a class="headerlink" href="#user-defined-fields" title="Permalink to this headline">¶</a></h2>
<p>Along with mandatory geometric specific fields each set of geometric primitives
could be supplied with arbitrary number of user defined fields.
All of those fields are ignored by hybmesh reader
(except for fields called <code class="docutils literal"><span class="pre">&quot;__boundary_types__&quot;</span></code>) but could be
useful for external solver readers.</p>
<p>Those fields are written into a hybmesh file as an
ordinary <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric arrays</span></a> called <strong>FIELD</strong> with
one supplemented attribute <em>name</em> which defines the name of user defined field:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;field_name&quot;</span> <span class="na">type=</span><span class="s">&quot;char/int/float/double&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii/binary&quot;</span> <span class="na">dim=</span><span class="s">&quot;1/2/3/.../variable&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
<p>If attribute <cite>dim</cite> is omitted then the array is treated as a scalar data with <cite>dim=1</cite>.</p>
<p>If grid or contour has non-zero boundary types, then a field
named <code class="docutils literal"><span class="pre">&quot;__boundary_type__&quot;</span></code> will be automatically added to elements representing
<strong>EDGES</strong> (for 2D data) or <strong>FACES</strong> (for 3D data) structure.</p>
<p>Hybmesh could also save grids providing some additional grid information
which is stored in those fields.
For example for 2D grids additional <cite>cell-vertices</cite> or <cite>cell-edges</cite>
connectivity table could be calculated and saved into <cite>__cell_vertices__</cite>
and <cite>__cell_edges__</cite> fields. Note that all of those fields
created by HybMesh are conventionally dubbed using leading and ending double underscores.
See specific grid export functions to see other possible data
which could be written.</p>
</div>
<div class="section" id="d-grid-format">
<span id="grid2d-file"></span><h2>2D Grid Format<a class="headerlink" href="#d-grid-format" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id5">
<a class="reference internal image-reference" href="_images/g2d_scheme.png"><img alt="_images/g2d_scheme.png" src="_images/g2d_scheme.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">fig. 4</span></p>
</div>
<p>Structure of xml part of a file containing set of 2D grids is shown in figure 4.
Each grid is stored in an element called <strong>GRID2D</strong>. It should have
a name unique to all grids stored in the file.
Elements <strong>N_VERTICES</strong>, <strong>N_EDGES</strong>, <strong>N_CELLS</strong> contain
number of vertices, edges and cells of the grid respectively.</p>
<p>Element <strong>VERTICES</strong> stores grid vertex information.
Its mandatory subnode <strong>COORDS</strong> stores coordinates of grid points
as a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a>. Vector dimension
of this array is always 2 so <cite>&#8220;dim&#8221;</cite> attribute of the element should be omitted.</p>
<p>Element <strong>EDGES</strong> presents grid edges structure.
In subnode <strong>VERT_CONNECT</strong> edge-vertex connectivity is stored as
a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a> of vector dimension of 2.
For each edge it represents index of start vertex and index of end vertex in the edge.</p>
<p>Subnode <strong>CELL_CONNECT</strong> provides edge-cell connectivity. This is
also a numeric array of integer values and vector dimension of 2.
For each edge it stores indices of left and right adjacent cells.
Direction of edge is defined by the order of vertices given in <strong>VERT_CONNECT</strong> table.
So the right cell is located to the right hand side if one looks from the start vertex towards the end vertex.
If this is a boundary edge and there is no right or left adjacent cell than <cite>-1</cite> should be placed
on its place.</p>
<p><strong>EDGES</strong> node could also provide special <a class="reference internal" href="#udef-fields"><span class="std std-ref">user field</span></a> named <code class="docutils literal"><span class="pre">&quot;__boundary_types__&quot;</span></code>
which will be interpreted by hybmesh as edges boundary types. Note that
user field for edges set should contain data for all edges including inner and boundary ones.
For inner edges a boundary type could be safely set to zero.</p>
<p>Element <strong>CELLS</strong> provides no valuable information on grid geometry
since it was fully defined in <strong>VERTICES</strong> and <strong>EDGES</strong> elements
and could by empty.</p>
<div class="figure" id="id6">
<a class="reference internal image-reference" href="_images/g2_for_hmxml.png"><img alt="_images/g2_for_hmxml.png" src="_images/g2_for_hmxml.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">fig. 5</span></p>
</div>
<p>A grid depicted in figure 5 will be written to ascii hmg file as</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;HybMeshData&gt;</span>
  <span class="nt">&lt;GRID2D</span> <span class="na">name=</span><span class="s">&quot;Grid1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;N_VERTICES&gt;</span>6<span class="nt">&lt;/N_VERTICES&gt;</span>
    <span class="nt">&lt;N_EDGES&gt;</span>7<span class="nt">&lt;/N_EDGES&gt;</span>
    <span class="nt">&lt;N_CELLS&gt;</span>2<span class="nt">&lt;/N_CELLS&gt;</span>
    <span class="nt">&lt;VERTICES&gt;</span>
      <span class="nt">&lt;COORDS</span> <span class="na">type=</span><span class="s">&quot;double&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 0
        0.5 0
        1.0 0.3
        1.0 0.5
        0.5 0.5
        0 0.5
      <span class="nt">&lt;/COORDS&gt;</span>
    <span class="nt">&lt;/VERTICES&gt;</span>
    <span class="nt">&lt;EDGES&gt;</span>
      <span class="nt">&lt;VERT_CONNECT</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 5
        0 1
        1 4
        4 5
        1 2
        2 3
        3 4
      <span class="nt">&lt;/VERT_CONNECT&gt;</span>
      <span class="nt">&lt;CELL_CONNECT</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        -1 0
        0 -1
        0 1
        0 -1
        1 -1
        1 -1
        1 -1
      <span class="nt">&lt;/CELL_CONNECT&gt;</span>
      <span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;__boundary_types__&quot;</span> <span class="na">type=</span><span class="s">&quot;char&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
         1 2 0 1 2 2 1
      <span class="nt">&lt;/FIELD&gt;</span>
    <span class="nt">&lt;/EDGES&gt;</span>
    <span class="nt">&lt;CELLS/&gt;</span>
  <span class="nt">&lt;/GRID2D&gt;</span>
<span class="nt">&lt;/HybMeshData&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="d-contour-format">
<span id="contour2d-file"></span><h2>2D Contour Format<a class="headerlink" href="#d-contour-format" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id7">
<a class="reference internal image-reference" href="_images/c2d_scheme.png"><img alt="_images/c2d_scheme.png" src="_images/c2d_scheme.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">fig. 6</span></p>
</div>
<p>Hybmesh treats contours as a set of connected edges.
There is no restriction on whether this connection provides closed or open contour
or even a set of not connected edges. So this information is not stored in a file.
Structure of xml part of a file containing set of 2d contour is shown in figure 6.
Each contour is saved in an element called <strong>CONTOUR2D</strong>. It should have
a name unique to all contours stored in the file.
Elements <strong>N_VERTICES</strong>, <strong>N_EDGES</strong> contain
number of vertices and edges of the contour respectively.</p>
<p>Element <strong>VERTICES</strong> stores contour vertices information.
Its mandatory subnode <strong>COORDS</strong> contains coordinates of points
as a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a>. Vector dimension
of this array is always 2 and <cite>&#8220;dim&#8221;</cite> attribute of the element should be omitted.</p>
<p>Element <strong>EDGES</strong> presents edges structure.
Its only mandatory subnode <strong>VERT_CONNECT</strong> contains edge-vertex connectivity as
a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a> with vector dimension of 2.
For each edge it represents index of start vertex and index of end vertex of the edge.</p>
<p><strong>EDGES</strong> node could also provide special <a class="reference internal" href="#udef-fields"><span class="std std-ref">user field</span></a> named <code class="docutils literal"><span class="pre">__boundary_types__</span></code>
which will be interpreted by hybmesh as edges boundary types.</p>
<div class="figure" id="id8">
<a class="reference internal image-reference" href="_images/c1_for_hmxml.png"><img alt="_images/c1_for_hmxml.png" src="_images/c1_for_hmxml.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">fig. 7</span></p>
</div>
<p>A contour depicted in figure 7 will be written to ascii hmc file as</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;HybMeshData&gt;</span>
  <span class="nt">&lt;CONTOUR2D</span> <span class="na">name=</span><span class="s">&quot;Contour1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;N_VERTICES&gt;</span>6<span class="nt">&lt;/N_VERTICES&gt;</span>
    <span class="nt">&lt;N_EDGES&gt;</span>6<span class="nt">&lt;/N_EDGES&gt;</span>
    <span class="nt">&lt;VERTICES&gt;</span>
      <span class="nt">&lt;COORDS</span> <span class="na">type=</span><span class="s">&quot;double&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 0
        0.5 0
        1.0 0.3
        1.0 0.5
        0.5 0.5
        0 0.5
      <span class="nt">&lt;/COORDS&gt;</span>
    <span class="nt">&lt;/VERTICES&gt;</span>
    <span class="nt">&lt;EDGES&gt;</span>
      <span class="nt">&lt;VERT_CONNECT</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 5
        0 1
        3 4
        4 5
        1 2
        2 3
      <span class="nt">&lt;/VERT_CONNECT&gt;</span>
      <span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;__boundary_types__&quot;</span> <span class="na">type=</span><span class="s">&quot;char&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        1 2 1 1 2 2
      <span class="nt">&lt;/FIELD&gt;</span>
    <span class="nt">&lt;/EDGES&gt;</span>
  <span class="nt">&lt;/CONTOUR2D&gt;</span>
<span class="nt">&lt;/HybMeshData&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="grid3d-file">
<span id="id1"></span><h2>3D Grid format<a class="headerlink" href="#grid3d-file" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id9">
<a class="reference internal image-reference" href="_images/g3d_scheme.png"><img alt="_images/g3d_scheme.png" src="_images/g3d_scheme.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">fig. 8</span></p>
</div>
<p>Structure of xml part of a file containing set of 3d grids is shown in figure 8.
Each grid is stored in an element called <strong>GRID3D</strong>. It should have
a name unique to all grids stored in the file.
Elements <strong>N_VERTICES</strong>, <strong>N_EDGES</strong>, <strong>N_FACES</strong>, <strong>N_CELLS</strong> contain
number of vertices, edges, faces and cells of the grid respectively.</p>
<p>Element <strong>VERTICES</strong> stores grid vertex information.
Its mandatory subnode <strong>COORDS</strong> stores coordinates of grid points
as a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a>. Vector dimension
of this array is always 3 so <cite>&#8220;dim&#8221;</cite> attribute of the element should be omitted.</p>
<p>Element <strong>EDGES</strong> presents grid edges structure.
In subnode <strong>VERT_CONNECT</strong> edge-vertex connectivity is stored as
a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a> of vector dimension of 2.
For each edge it represents index of start vertex and index of end vertex in the edge.</p>
<p>Element <strong>FACES</strong> presents grid faces structure.
In subnode <strong>EDGE_CONNECT</strong> edge-vertex connectivity is stored as
a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a> of vector. Its dimension could
be fixed or variable depending on type of the grid.
For each face it represents <strong>ordered indices</strong> of edges which
form the face.</p>
<p>Subnode <strong>CELL_CONNECT</strong> provides face-cell connectivity. This is
a numeric array of integer values with vector dimension of 2.
For each face it stores indices of left and right adjacent cells.
Direction of faces is defined by the order of edges given in <strong>EDGE_CONNECT</strong> table.
If one looks at the face and sees its edges in counterclockwise ordering than
he looks from its right towards its left side.
If this is a boundary face and there is no right or left adjacent cell than <cite>-1</cite> should be placed
on its place.</p>
<p><strong>FACES</strong> node could also provide special <a class="reference internal" href="#udef-fields"><span class="std std-ref">user field</span></a> named <code class="docutils literal"><span class="pre">__boundary_types__</span></code>
which will be interpreted by hybmesh as a boundary features of faces.</p>
<p>Element <strong>CELLS</strong> provides no valuable information on grid geometry
since it was fully defined in previously defined elements
and could by empty.</p>
<div class="figure" id="id10">
<a class="reference internal image-reference" href="_images/g3_for_hmxml.png"><img alt="_images/g3_for_hmxml.png" src="_images/g3_for_hmxml.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">fig. 9</span></p>
</div>
<p>A grid depicted in figure 9 will be written to ascii hmg file as</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;HybMeshData&gt;</span>
  <span class="nt">&lt;GRID3D</span> <span class="na">name=</span><span class="s">&quot;Grid1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;N_VERTICES&gt;</span>7<span class="nt">&lt;/N_VERTICES&gt;</span>
    <span class="nt">&lt;N_EDGES&gt;</span>12<span class="nt">&lt;/N_EDGES&gt;</span>
    <span class="nt">&lt;N_FACES&gt;</span>8<span class="nt">&lt;/N_FACES&gt;</span>
    <span class="nt">&lt;N_CELLS&gt;</span>2<span class="nt">&lt;/N_CELLS&gt;</span>
    <span class="nt">&lt;VERTICES&gt;</span>
      <span class="nt">&lt;COORDS</span> <span class="na">type=</span><span class="s">&quot;double&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 0 0
        0.8 0 0.5
        1 0 0
        0 1 0
        0.8 1 0.5
        1 1 0
        0.5 1.7 0.5
      <span class="nt">&lt;/COORDS&gt;</span>
    <span class="nt">&lt;/VERTICES&gt;</span>
    <span class="nt">&lt;EDGES&gt;</span>
      <span class="nt">&lt;VERT_CONNECT</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 1
        1 2
        0 2
        0 3
        1 4
        2 5
        3 4
        4 5
        3 5
        3 6
        4 6
        5 6
      <span class="nt">&lt;/VERT_CONNECT&gt;</span>
    <span class="nt">&lt;/EDGES&gt;</span>
    <span class="nt">&lt;FACES&gt;</span>
      <span class="nt">&lt;EDGE_CONNECT</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span> <span class="na">dim=</span><span class="s">&quot;variable&quot;</span><span class="nt">&gt;</span>
        4   0 4 6 3
        4   1 5 7 4
        4   2 5 8 3
        3   0 1 2
        3   6 7 8
        3   6 10 9
        3   7 11 10
        3   9 8 11
      <span class="nt">&lt;/EDGE_CONNECT&gt;</span>
      <span class="nt">&lt;CELL_CONNECT</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 -1
        0 -1
        -1 0
        -1 0
        0 1
        1 -1
        1 -1
        -1 1
      <span class="nt">&lt;/CELL_CONNECT&gt;</span>
      <span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;__boundary_types__&quot;</span> <span class="na">type=</span><span class="s">&quot;char&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        2 2 2 1 0 1 1 1
      <span class="nt">&lt;/FIELD&gt;</span>
    <span class="nt">&lt;/FACES&gt;</span>
    <span class="nt">&lt;CELLS/&gt;</span>
  <span class="nt">&lt;/GRID2D&gt;</span>
<span class="nt">&lt;/HybMeshData&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="d-surface-format">
<span id="surface3d-file"></span><h2>3D Surface format<a class="headerlink" href="#d-surface-format" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id11">
<a class="reference internal image-reference" href="_images/s3d_scheme.png"><img alt="_images/s3d_scheme.png" src="_images/s3d_scheme.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">fig. 10</span></p>
</div>
<p>Hybmesh treats surfaces as a set of connected faces.
There is no restriction on whether this connection provides closed or open surface
or even a set of not connected faces. So this information is not stored in a file.
Structure of xml part of a file containing set of surfaces is shown in figure 8.
Each surface is stored in an element called <strong>SURFACE3D</strong>. It should have
a name unique to all surfaces stored in the file.
Elements <strong>N_VERTICES</strong>, <strong>N_EDGES</strong>, <strong>N_FACES</strong> contain
number of vertices, edges and faces of the surface respectively.</p>
<p>Element <strong>VERTICES</strong> stores surface vertex information.
Its mandatory subnode <strong>COORDS</strong> contains coordinates of grid points
as a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a>. Vector dimension
of this array is always 3 so <cite>&#8220;dim&#8221;</cite> attribute of the element should be omitted.</p>
<p>Element <strong>EDGES</strong> presents grid edges structure.
In subnode <strong>VERT_CONNECT</strong> edge-vertex connectivity is stored as
a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a> of vector dimension of 2.
For each edge it represents index of start vertex and index of end vertex in the edge.</p>
<p>Element <strong>FACES</strong> presents surface faces structure.
In subnode <strong>EDGE_CONNECT</strong> edge-vertex connectivity is stored as
a <a class="reference internal" href="#numeric-storage"><span class="std std-ref">numeric array</span></a> of vectors. Its dimension could
be fixed or variable depending on type of the surface.
For each face it represents <strong>ordered indices</strong> of edges which
form the face.</p>
<p><strong>FACES</strong> node could also provide special <a class="reference internal" href="#udef-fields"><span class="std std-ref">user field</span></a> named <code class="docutils literal"><span class="pre">__boundary_types__</span></code>
which will be interpreted by hybmesh as a boundary features of faces.</p>
<div class="figure" id="id12">
<a class="reference internal image-reference" href="_images/c2_for_hmxml.png"><img alt="_images/c2_for_hmxml.png" src="_images/c2_for_hmxml.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">fig. 11</span></p>
</div>
<p>A surface depicted in figure 11 will be written to ascii hmc file as</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;HybMeshData&gt;</span>
  <span class="nt">&lt;SURFACE3D</span> <span class="na">name=</span><span class="s">&quot;Surface1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;N_VERTICES&gt;</span>6<span class="nt">&lt;/N_VERTICES&gt;</span>
    <span class="nt">&lt;N_EDGES&gt;</span>8<span class="nt">&lt;/N_EDGES&gt;</span>
    <span class="nt">&lt;N_FACES&gt;</span>3<span class="nt">&lt;/N_FACES&gt;</span>
    <span class="nt">&lt;VERTICES&gt;</span>
      <span class="nt">&lt;COORDS</span> <span class="na">type=</span><span class="s">&quot;double&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 0 0
        0.7 0 -0.5
        2 0.1 0
        1 0 1
        0 1 0
        1.5 1 0
      <span class="nt">&lt;/COORDS&gt;</span>
    <span class="nt">&lt;/VERTICES&gt;</span>
    <span class="nt">&lt;EDGES&gt;</span>
      <span class="nt">&lt;VERT_CONNECT</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        0 1
        0 3
        2 3
        1 2
        0 4
        1 4
        2 5
        4 5
      <span class="nt">&lt;/VERT_CONNECT&gt;</span>
    <span class="nt">&lt;/EDGES&gt;</span>
    <span class="nt">&lt;FACES&gt;</span>
      <span class="nt">&lt;EDGE_CONNECT</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span> <span class="na">dim=</span><span class="s">&quot;variable&quot;</span><span class="nt">&gt;</span>
        3   0 5 4
        4   3 6 7 5
        4   0 1 2 3
      <span class="nt">&lt;/EDGE_CONNECT&gt;</span>
      <span class="nt">&lt;FIELD</span> <span class="na">name=</span><span class="s">&quot;__boundary_types__&quot;</span> <span class="na">type=</span><span class="s">&quot;char&quot;</span> <span class="na">format=</span><span class="s">&quot;ascii&quot;</span><span class="nt">&gt;</span>
        2 2 1
      <span class="nt">&lt;/FIELD&gt;</span>
    <span class="nt">&lt;/FACES&gt;</span>
  <span class="nt">&lt;/SURFACE3D&gt;</span>
<span class="nt">&lt;/HybMeshData&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="project-workflow-format">
<span id="hmp-file"></span><h2>Project Workflow Format<a class="headerlink" href="#project-workflow-format" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id13">
<a class="reference internal image-reference" href="_images/hmp_scheme.png"><img alt="_images/hmp_scheme.png" src="_images/hmp_scheme.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-text">fig. 12</span></p>
</div>
<p>A file representing hybmesh project
contains sequence of all commands and
current state of the program including
all current geometrical objects</p>
<p>Its xml structure is depicted in figure 12.
Each workflow is stored in <strong>FLOW</strong> nodes.
One project file could possibly contain multiple work flows
with its own set of data and commands.
Command sequence for a flow is stored in element called <strong>COMMANDS</strong>.
Each command is represented by xml element</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;COM</span> <span class="na">name=</span><span class="s">&quot;command name&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;LINE&gt;</span>command options<span class="nt">&lt;/LINE&gt;</span>
  <span class="nt">&lt;COMMENS&gt;</span>some user comments<span class="nt">&lt;/COMMENTS&gt;</span>
<span class="nt">&lt;/COM&gt;</span>
</pre></div>
</div>
<p>where <em>command name</em> is an internal hybmesh name of the command
and <em>command options</em> is a internal string representation of command options.
One of the command (most likely the very last one) should be
supplied with attribute <cite>current=&#8221;1&#8221;</cite>. This shows hybmesh
that the state of the program is saved at the moment after
execution of this command.</p>
<p>The program state is written in element called <strong>STATE</strong>.
It contains all
<a class="reference internal" href="#grid2d-file"><span class="std std-ref">2d grids</span></a>,
<a class="reference internal" href="#grid3d-file"><span class="std std-ref">3d grids</span></a>,
<a class="reference internal" href="#contour2d-file"><span class="std std-ref">2d contours</span></a>,
and <a class="reference internal" href="#surface3d-file"><span class="std std-ref">surfaces</span></a>
present in the current program state.
Nodes <strong>BTYPE</strong> store registered boundary types:
their integer index and user defined name.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Native File Formats</a><ul>
<li><a class="reference internal" href="#numeric-arrays-storage">Numeric arrays storage</a></li>
<li><a class="reference internal" href="#user-defined-fields">User defined fields</a></li>
<li><a class="reference internal" href="#d-grid-format">2D Grid Format</a></li>
<li><a class="reference internal" href="#d-contour-format">2D Contour Format</a></li>
<li><a class="reference internal" href="#grid3d-file">3D Grid format</a></li>
<li><a class="reference internal" href="#d-surface-format">3D Surface format</a></li>
<li><a class="reference internal" href="#project-workflow-format">Project Workflow Format</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ooics.html"
                        title="previous chapter">C# Bindings for HybMesh</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="vers.html"
                        title="next chapter">Versions History</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/fileformats.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="vers.html" title="Versions History"
             >next</a> |</li>
        <li class="right" >
          <a href="ooics.html" title="C# Bindings for HybMesh"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HybMesh 0.5.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, KalininEI.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.3.
    </div>
  </body>
</html>